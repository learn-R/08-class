---
title: "Muestras complejas y precisión de inferencia estadística"
linktitle: "7: Muestras complejas y precisión de inferencia estadística"
date: "2021-09-16"
menu:
  example:
    parent: Ejemplos
    weight: 7
type: docs
toc: true
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## 0. Objetivo del práctico

Este práctico tiene por objetivo introducir el trabajo estadístico con **muestras complejas en R**, así como en la precisión de inferencia estadística. 

## 1. Recursos del práctico

El presente práctico será realizado con datos de la *Encuesta de Caracterización Socioeconómica (CASEN)* en su versión 2020. Estos datos ya han sido previamente procesados para su correcta realización, recodificando casos perdidos, y renombrando y seleccionando variables. 

Recuerden siempre consultar el [**manual/libro de códigos**](http://observatorio.ministeriodesarrollosocial.gob.cl/storage/docs/casen/2020/Libro_de_codigos_Base_de_Datos_Casen_en_Pandemia_2020.pdf) antes de trabajar una base de datos.

## 2. Librerías a utilizar

Utilizaremos las siguientes librerías:

1. `pacman`: para facilitar y agilizar la lectura de los paquetes a utilizar en R

2. `sjmisc`: para explorar datos

3. `srvyr`:

4. `survey`:

5. `dplyr`: para manipular datos

# Pasos del procesamiento

## 1. Cargar librerías

```{r packages}
pacman::p_load(sjmisc,
               srvyr,
               survey,
               dplyr)
```


## 2. Cargar datos

Como se señaló anteriormente, trabajaremos con datos de CASEN 2020, ya procesados con anterioridad

```{r readRDS}
data <- readRDS("input/data/casen_proc.rds")
```

Como podemos ver, estos datos tienen 147.239 filas (observaciones), así como 8 columnas. Inspeccionemos: 

```{r head1}
head(data)
```

Tenemos tanto variables numéricas (exp, id, ing_tot_hog y tot_per) como factores (pobreza, prev_salud y prev_pens). ¡Explorémoslas!

## 3. Explorar datos

Con `frq()` de `sjmisc`, exploraremos las categorías de las variables factor:

```{r frq1}
frq(data$region)
frq(data$pobreza)
frq(data$prev_salud)
frq(data$prev_pens)
```

Como podemos ver, *region* provee información sobre la región a la que pertenecen los hogares; *pobreza* nos provee información respecto de la situación de pobreza por ingresos (o no) de los hogares; *prev_salud* nos informa respecto del sistema previsional de salud al cual pertenece el/la respondente; y *prev_pens* indica si quien responde está afiliado/a (o no) a algún sistema previsional. 

Ahora vamos con `descr()` de `sjmisc` para las variables numéricas

```{r descr1}
descr(data$exp)
descr(data$id)
descr(data$ing_tot_hog)
descr(data$tot_per)
```

*ing_tot_hog* presenta información respecto de los ingresos totales de los hogares; *tot_per* indica el total de personas que habitan cada vivienda; *exp* es un ponderador regional; e *id* es un identificador para cada sujeto que responde el cuestionario. Estas últimas dos variables serán **sumamente relevantes** para este práctico. 

